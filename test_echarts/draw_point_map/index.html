<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>测试在地图上打点</title>
    <!--引入bootstrap和jquery\echarts-->
    <link rel="stylesheet" href="bootstrap.min.css">
    <script src="echarts.js"></script>
    <script src="jquery-3.4.1.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <form class="form-horizontal">
                    <input id="place-input" type="text" class="form-control" value="天坛" placeholder="请输入地址">
                    <button type="button" id="search-btn" class="btn btn-success">查询</button>
                </form>
            </div>
            <div class="col-md-6">
                <div id="main" style="height: 500px"></div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        var token = "yEMEWptLvhAqUsyrKXXA158b5ncfpBm7";
        var url = "http://api.map.baidu.com/geocoder/v2/?output=json&ak="+token+'&address=';
        var eplaceinput = $('#place-input');
        var esearchbtn = $('#search-btn');
        var mychart = echarts.init(document.getElementById("main"));

        // 绑定按钮事件
        esearchbtn.click(function () {
            // 获取输入值
            var place = eplaceinput.val();
            if (place){
                // 拼接URL
                $.getJSON(url+place+'&callback=?',function (res) {
                    if (res.status === 0){
                        // console.log(res.result);
                        drawMap(place,res.result.location)
                    }else{
                        alert('未找到地址信息')
                    }
                })
            }
        });

        function drawMap(name,loc){
            var option = {
                // backgroundColor:'#404a59',
                title:{
                    title : {
                        text:'地址搜索',
                        left:'center'
                    },
                    tooltip:{
                        trigger:'item'
                    },
                    geo:{
                        map:'china',
                        label:{
                            emphasis:{
                                show:false
                            }
                        },
                        roam:true
                    }
                },
                series:[
                    {
                        name:'地址',
                        type:'scatter',
                        coordinateSystem:'geo',
                        data:[
                            {
                                name:name,
                                value:[loc.lng,loc.lat]
                            }
                        ],
                        symbolSize:function (val) {
                            return 10

                        }
                    }
                ]
            };
        mychart.setOption(option)
        }
    </script>

</body>
</html>